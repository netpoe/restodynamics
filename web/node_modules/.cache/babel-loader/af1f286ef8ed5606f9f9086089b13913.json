{"ast":null,"code":"import _slicedToArray from \"/Users/GustavoIbarra/Projects/ELCOMALOTE/restodynamics/web/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/GustavoIbarra/Projects/ELCOMALOTE/restodynamics/web/src/views/stock/StockUnitDetails.tsx\";\nimport { Box, Container, TextField, Typography, withStyles } from \"@material-ui/core\";\nimport React from \"react\";\nimport { useMutation, useQuery } from \"urql\";\nimport { QueryStockUnit } from \"../../api/queries\";\nexport const StockUnitDetails = withStyles(theme => ({}))(({\n  classes,\n  match\n}) => {\n  const _useQuery = useQuery({\n    query: QueryStockUnit,\n    variables: {\n      where: {\n        id: match.params.id\n      }\n    }\n  }),\n        _useQuery2 = _slicedToArray(_useQuery, 1),\n        stockUnitDetailsQuery = _useQuery2[0];\n\n  console.log(stockUnitDetailsQuery.error);\n  console.log(stockUnitDetailsQuery.data);\n  return React.createElement(React.Fragment, null, stockUnitDetailsQuery.fetching ? React.createElement(Typography, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24\n    },\n    __self: this\n  }, \"Cargando\") : stockUnitDetailsQuery.error || stockUnitDetailsQuery.data == null ? React.createElement(Typography, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    },\n    __self: this\n  }, \"Error\") : React.createElement(Box, {\n    minHeight: \"100vh\",\n    bgcolor: \"default\",\n    pt: 4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28\n    },\n    __self: this\n  }, React.createElement(Container, {\n    maxWidth: \"xl\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    variant: \"h6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }, match.params.id ? match.params.id : \"Nueva Unidad de Inventario\"), React.createElement(StockUnitNameField, {\n    value: stockUnitDetailsQuery.data.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }))));\n});\n\nconst StockUnitNameField = ({\n  value\n}) => {\n  const _React$useState = React.useState(value),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        name = _React$useState2[0],\n        setName = _React$useState2[1];\n\n  const _React$useState3 = React.useState(undefined),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        error = _React$useState4[0],\n        setError = _React$useState4[1];\n\n  const _useMutation = useMutation(\"\\n    mutation ($where: StockUnitWhereUniqueInput!, $create: StockUnitCreateInput!, $update: StockUnitUpdateInput!) {\\n      upsertStockUnit(where: $where, create: $create, update: $update) {\\n        id\\n        name\\n      }\\n    }\\n  \"),\n        _useMutation2 = _slicedToArray(_useMutation, 2),\n        mutation = _useMutation2[0],\n        executeMutation = _useMutation2[1];\n\n  const upsert = async () => {\n    if (!name) {\n      return;\n    }\n\n    const _ref = await executeMutation({\n      where: {\n        name\n      },\n      create: {\n        name\n      },\n      update: {\n        name\n      }\n    }),\n          data = _ref.data,\n          mutationError = _ref.error;\n\n    console.log(data, mutationError);\n    setError(mutationError);\n  };\n\n  return React.createElement(TextField, {\n    error: Boolean(error),\n    fullWidth: true,\n    name: \"name\",\n    variant: \"outlined\",\n    label: \"Nombre\",\n    autoFocus: true,\n    value: name,\n    onChange: e => setName(e.target.value),\n    onBlur: upsert,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  });\n};","map":{"version":3,"sources":["/Users/GustavoIbarra/Projects/ELCOMALOTE/restodynamics/web/src/views/stock/StockUnitDetails.tsx"],"names":["Box","Container","TextField","Typography","withStyles","React","useMutation","useQuery","QueryStockUnit","StockUnitDetails","theme","classes","match","query","variables","where","id","params","stockUnitDetailsQuery","console","log","error","data","fetching","name","StockUnitNameField","value","useState","setName","undefined","setError","mutation","executeMutation","upsert","create","update","mutationError","Boolean","e","target"],"mappings":"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","sourcesContent":["import { Box, Container, TextField, Typography, withStyles } from \"@material-ui/core\";\nimport React from \"react\";\nimport { RouteComponentProps } from \"react-router\";\nimport { CombinedError, useMutation, useQuery } from \"urql\";\nimport { QueryStockUnit } from \"../../api/queries\";\n\ninterface IStockUnitDetailsProps extends RouteComponentProps<{ id: string }> {\n  classes: any;\n}\n\nexport const StockUnitDetails = withStyles(theme => ({}))(\n  ({ classes, match }: IStockUnitDetailsProps) => {\n    const [stockUnitDetailsQuery] = useQuery({\n      query: QueryStockUnit,\n      variables: { where: { id: match.params.id } },\n    });\n\n    console.log(stockUnitDetailsQuery.error);\n    console.log(stockUnitDetailsQuery.data);\n\n    return (\n      <>\n        {stockUnitDetailsQuery.fetching ? (\n          <Typography>Cargando</Typography>\n        ) : stockUnitDetailsQuery.error || stockUnitDetailsQuery.data == null ? (\n          <Typography>Error</Typography>\n        ) : (\n          <Box minHeight=\"100vh\" bgcolor=\"default\" pt={4}>\n            <Container maxWidth=\"xl\">\n              <Typography variant=\"h6\">\n                {match.params.id ? match.params.id : \"Nueva Unidad de Inventario\"}\n              </Typography>\n              <StockUnitNameField value={stockUnitDetailsQuery.data.name} />\n            </Container>\n          </Box>\n        )}\n      </>\n    );\n  },\n);\n\nconst StockUnitNameField = ({ value }: { value: any }) => {\n  const [name, setName] = React.useState(value);\n  const [error, setError] = React.useState<CombinedError | undefined>(undefined);\n  const [mutation, executeMutation] = useMutation(`\n    mutation ($where: StockUnitWhereUniqueInput!, $create: StockUnitCreateInput!, $update: StockUnitUpdateInput!) {\n      upsertStockUnit(where: $where, create: $create, update: $update) {\n        id\n        name\n      }\n    }\n  `);\n\n  const upsert = async () => {\n    if (!name) {\n      return;\n    }\n\n    const { data, error: mutationError } = await executeMutation({\n      where: {\n        name,\n      },\n      create: {\n        name,\n      },\n      update: {\n        name,\n      },\n    });\n    console.log(data, mutationError);\n    setError(mutationError);\n  };\n\n  return (\n    <TextField\n      error={Boolean(error)}\n      fullWidth\n      name=\"name\"\n      variant=\"outlined\"\n      label=\"Nombre\"\n      autoFocus\n      value={name}\n      onChange={(e: any) => setName(e.target.value)}\n      onBlur={upsert}\n    />\n  );\n};\n"]},"metadata":{},"sourceType":"module"}